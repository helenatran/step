<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>My Map</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAXHeiUib7BmE7tup3E0FWsn41k1lJMuFs"></script>
    <script>
      document.addEventListener('DOMContentLoaded', async function() {
        const response = await fetch('/login', {method: 'POST'});
        const isUserLoggedIn = await response.json();

        const mapLoginRequestContainer = document.getElementById('map-login-request');
        const yourMapContainer = document.getElementById('your-map');
        if (isUserLoggedIn) {
          yourMapContainer.style.display = 'block';
          mapLoginRequestContainer.style.display = 'none';
        }
        else {
          yourMapContainer.style.display = 'none';
          mapLoginRequestContainer.style.display = 'block';
        }
      })
    </script>
    <script src="script.js"></script>

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
  </head>

  <body onload="loadMaps()">
    <div id="navbar-container"></div>

    <div id="banner">
      <img src="images/melbourne.jpg" alt="banner" style="width:100%; height:400px;"/>
      <h1 id="banner-text">My Map</h1>
    </div>

    <div id="map-page-content">
      <p>Browse the map to see my favourite or most frequented spots in Sydney!</p>
      <div id="my-map"></div>

      <h4>Your turn: Show me your favourite spots!</h4>
      <div id="map-login-request" style="display:none">
        <p>You must login to be able to add a spot:  
          <span>
            <button class="waves-effect waves-light btn-small pink lighten-3" onClick="logIn()">Login
            <i class="material-icons right">account_box</i>
            </button>
          </span>
        </p>
      </div>
      <div id="your-map" style="display:none"></div>
    </div>
    
    <div id="footer-container" style="height:115px;"></div>
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/materialize.min.js"></script>
  </body>
</html>
